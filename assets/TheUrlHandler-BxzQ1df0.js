import{u as p,h as v,i as d,r as m,j as A,o as V,f as D}from"./index-DU9MSB7S.js";import{u as _}from"./updateUrl-CDERATr3.js";const O={__name:"TheUrlHandler",setup(S){const u=p(),g=v(),e=d();function c(t){return Number.isInteger(Number(t))}const l=m(!1),i=m(!1);A(async()=>{const t=u.query;if(t.councilDate){const r=t.councilDate||null,s=t.arrangement||null,a=t.feature||null,o=t.focus||null;if(r&&(r==="current"?e.setAsOfDate(null):await e.setAsOfDate(parseInt(r))),await e.getData(),s){l.value=c(s);let n;l.value?(n=await f(r,s),n?e.setSeatArrangement(s):e.setSeatArrangement("fraction")):e.setSeatArrangement(s)}if(a){i.value=c(a);let n;i.value?(n=await f(r,a),n?e.setSeatFeature(a):e.setSeatFeature("fraction")):e.setSeatFeature(a)}o&&e.setMemberFocus(o.split(","))}else await e.getData(),_(u,g)});async function f(t,r){const a=(t==="current"?e.listOfVotesCurrent:e.listOfVotesAsOfDate).find(o=>o.voteNr===r);return a?(a.voteImported||(await e.getVoteResults(a),a.voteImported=!0),!0):!1}return(t,r)=>(V(),D("span"))}};export{O as default};
